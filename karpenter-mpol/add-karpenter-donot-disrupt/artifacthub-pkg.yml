name: add-karpenter-donot-disrupt
version: 1.0.0
displayName: Add Karpenter Do Not Disrupt
createdAt: "2023-04-10T20:11:12.000Z"
description: >-
  If a Pod exists with the annotation `karpenter.sh/do-not-disrupt: true` on a Node, and a request is made to delete the Node, Karpenter will not drain any Pods from that Node or otherwise try to delete the Node. This is useful for Pods that should run uninterrupted to completion. This policy mutates Jobs and CronJobs so that Pods spawned by them will contain the `karpenter.sh/do-not-disrupt: true` annotation.
install: |-
  ```shell
  kubectl apply -f https://raw.githubusercontent.com/kyverno/policies/main/karpenter-mpol/add-karpenter-donot-disrupt/add-karpenter-donot-disrupt.yaml
  ```
keywords:
  - kyverno
  - Karpenter
  - EKS Best Practices
readme: |
  If a Pod exists with the annotation `karpenter.sh/do-not-disrupt: true` on a Node, and a request is made to delete the Node, Karpenter will not drain any Pods from that Node or otherwise try to delete the Node. This is useful for Pods that should run uninterrupted to completion. This policy mutates Jobs and CronJobs so that Pods spawned by them will contain the `karpenter.sh/do-not-disrupt: true` annotation.
  
  Refer to the documentation for more details on Kyverno annotations: https://artifacthub.io/docs/topics/annotations/kyverno/
annotations:
  kyverno/category: "Karpenter, EKS Best Practices"
  kyverno/kubernetesVersion: "1.23"
  kyverno/subject: "Pod"
digest: bf608d4be5190ec39a1a94ba7931d3cfd2cca758fb30215c74c093fcb8a42dfb
