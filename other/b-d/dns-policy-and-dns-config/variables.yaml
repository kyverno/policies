policies:
  - name: change-dns-config-policy
    rules:
    - name: dns-policy
      values:
        request.namespace: default
        dictionary.data.ClusterConfiguration: "apiServer:\n  certSANs:\n  - kubernetes\n  - kubernetes.default\n  - kubernetes.default.svc\n  - kubernetes.default.svc.mycluster\n  - 10.233.0.1\n  - localhost\n  - 127.0.0.1\n  - k8s-mycluster-master-1\n  - k8s-mycluster-master-2\n  - k8s-mycluster-master-3\n  - lb-apiserver.kubernetes.local\n  - 10.10.88.132\n  - 10.10.90.111\n  - 10.10.88.50\n  - k8s-mycluster-master-1.mycluster\n  - k8s-mycluster-master-2.mycluster\n  - k8s-mycluster-master-3.mycluster\n  extraArgs:\n    allow-privileged: \"true\"\n    anonymous-auth: \"True\"\n    apiserver-count: \"3\"\n    audit-log-maxage: \"1\"\n    audit-log-maxbackup: \"1\"\n    audit-log-maxsize: \"100\"\n    audit-log-path: /var/log/audit/kube-apiserver-audit.log\n    audit-policy-file: /etc/kubernetes/audit-policy/apiserver-audit-policy.yaml\n    authorization-mode: Node,RBAC\n    bind-address: 0.0.0.0\n    default-not-ready-toleration-seconds: \"300\"\n    default-unreachable-toleration-seconds: \"300\"\n    enable-aggregator-routing: \"true\"\n    endpoint-reconciler-type: lease\n    event-ttl: 1h0m0s\n    insecure-port: \"0\"\n    kubelet-certificate-authority: /etc/kubernetes/ssl/ca.crt\n    kubelet-preferred-address-types: InternalDNS,InternalIP,Hostname,ExternalDNS,ExternalIP\n    profiling: \"False\"\n    request-timeout: 1m0s\n    service-account-lookup: \"True\"\n    service-cluster-ip-range: 10.233.0.0/18\n    service-node-port-range: 30000-32767\n    storage-backend: etcd3\n  extraVolumes:\n  - hostPath: /etc/kubernetes/audit-policy\n    mountPath: /etc/kubernetes/audit-policy\n    name: audit-policy\n  - hostPath: /var/log/kubernetes/audit\n    mountPath: /var/log/audit\n    name: audit-logs\n  - hostPath: /usr/share/ca-certificates\n    mountPath: /usr/share/ca-certificates\n    name: usr-share-ca-certificates\n    readOnly: true\n  timeoutForControlPlane: 5m0s\napiVersion: kubeadm.k8s.io/v1beta3\ncertificatesDir: /etc/kubernetes/ssl\nclusterName: mycluster\ncontrolPlaneEndpoint: 10.10.88.132:6443\ncontrollerManager:\n  extraArgs:\n    bind-address: 0.0.0.0\n    cluster-cidr: 10.233.64.0/18\n    configure-cloud-routes: \"false\"\n    leader-elect-lease-duration: 15s\n    leader-elect-renew-deadline: 10s\n    node-cidr-mask-size: \"25\"\n    node-monitor-grace-period: 40s\n    node-monitor-period: 5s\n    profiling: \"False\"\n    service-cluster-ip-range: 10.233.0.0/18\n    terminated-pod-gc-threshold: \"12500\"\ndns:\n  imageRepository: registry.mycluster.com//coredns\n  imageTag: v1.8.6\netcd:\n  external:\n    caFile: /etc/ssl/etcd/ssl/ca.pem\n    certFile: /etc/ssl/etcd/ssl/node-k8s-mycluster-master-1.pem\n    endpoints:\n    - https://10.10.89.133:2379\n    - https://10.10.89.197:2379\n    - https://10.10.88.98:2379\n    keyFile: /etc/ssl/etcd/ssl/node-k8s-mycluster-master-1-key.pem\nimageRepository: registry.mycluster.com/\nkind: ClusterConfiguration\nkubernetesVersion: v1.23.7\nnetworking:\n  dnsDomain: mycluster\n  podSubnet: 10.233.64.0/18\n  serviceSubnet: 10.233.0.0/18\nscheduler:\n  extraArgs:\n    bind-address: 0.0.0.0\n    config: /etc/kubernetes/kubescheduler-config.yaml\n  extraVolumes:\n  - hostPath: /etc/kubernetes/kubescheduler-config.yaml\n    mountPath: /etc/kubernetes/kubescheduler-config.yaml\n    name: kubescheduler-config\n    readOnly: true\n"