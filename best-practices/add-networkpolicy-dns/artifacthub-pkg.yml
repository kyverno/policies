name: add-networkpolicy-dns
version: 1.0.1
displayName: Add Network Policy for DNS
createdAt: "2023-04-10T19:47:15.000Z"
description: >-
  By default, Kubernetes allows communication across all Pods within a cluster. The NetworkPolicy resource and a CNI plug-in that supports NetworkPolicy must be used to restrict communication. A default NetworkPolicy should be configured for each Namespace to deny all egress traffic from the Pods while still allowing DNS resolution. Application teams can then configure additional NetworkPolicy resources to allow desired traffic to application Pods from select sources. This policy will create a new NetworkPolicy resource named `allow-dns` when a new Namespace is created, which will deny all egress traffic while still allowing DNS queries to the kube-system Namespace.
install: |-
  ```shell
  kubectl apply -f https://raw.githubusercontent.com/kyverno/policies/main/best-practices/add-networkpolicy-dns/add-networkpolicy-dns.yaml
  ```
keywords:
  - kyverno
  - Multi-Tenancy
  - EKS Best Practices
readme: |
  By default, Kubernetes allows communication across all Pods within a cluster. The NetworkPolicy resource and a CNI plug-in that supports NetworkPolicy must be used to restrict communication. A default NetworkPolicy should be configured for each Namespace to deny all egress traffic from the Pods while still allowing DNS resolution. Application teams can then configure additional NetworkPolicy resources to allow desired traffic to application Pods from select sources. This policy will create a new NetworkPolicy resource named `allow-dns` when a new Namespace is created, which will deny all egress traffic while still allowing DNS queries to the kube-system Namespace.
  
  Refer to the documentation for more details on Kyverno annotations: https://artifacthub.io/docs/topics/annotations/kyverno/
annotations:
  kyverno/category: "Multi-Tenancy, EKS Best Practices"
  kyverno/kubernetesVersion: "1.23"
  kyverno/subject: "NetworkPolicy"
digest: 22eaecc9259eb6bb9b8be7c141fb38aa0eccf7c361ebaf8ea0ac6a8fea45d6b1
